# å¤šè¯­è¨€åŠŸèƒ½æ–‡æ¡£

## æ¦‚è¿°

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•åœ¨ TimeArea é¡¹ç›®ä¸­å®ç°å¤šè¯­è¨€ï¼ˆi18nï¼‰æ”¯æŒã€‚è™½ç„¶å½“å‰é¡¹ç›®ä¸»è¦ä½¿ç”¨ä¸­æ–‡ï¼Œä½†é€šè¿‡æœ¬æ–‡æ¡£å¯ä»¥è½»æ¾æ·»åŠ å…¶ä»–è¯­è¨€æ”¯æŒã€‚

## æŠ€æœ¯æ–¹æ¡ˆ

### æ¨èæ–¹æ¡ˆï¼šreact-i18next

`react-i18next` æ˜¯ React ç”Ÿæ€ä¸­æœ€æµè¡Œçš„å›½é™…åŒ–è§£å†³æ–¹æ¡ˆï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

- åŠŸèƒ½å®Œå–„ï¼Œç¤¾åŒºæ´»è·ƒ
- æ”¯æŒå‘½åç©ºé—´ã€å¤æ•°ã€æ’å€¼ç­‰é«˜çº§åŠŸèƒ½
- æ”¯æŒæ‡’åŠ è½½ç¿»è¯‘æ–‡ä»¶
- ä¸ React æ·±åº¦é›†æˆ
- æ”¯æŒ TypeScript

## å®‰è£…æ­¥éª¤

### 1. å®‰è£…ä¾èµ–

```bash
npm install react-i18next i18next i18next-browser-languagedetector
```

### 2. é¡¹ç›®ç»“æ„

å»ºè®®çš„ç›®å½•ç»“æ„ï¼š

```
src/
â”œâ”€â”€ i18n/
â”‚   â”œâ”€â”€ index.ts              # i18né…ç½®å…¥å£
â”‚   â”œâ”€â”€ locales/
â”‚   â”‚   â”œâ”€â”€ zh-CN/            # ä¸­æ–‡ç¿»è¯‘
â”‚   â”‚   â”‚   â”œâ”€â”€ common.json   # é€šç”¨ç¿»è¯‘
â”‚   â”‚   â”‚   â”œâ”€â”€ home.json     # é¦–é¡µç¿»è¯‘
â”‚   â”‚   â”‚   â”œâ”€â”€ history.json  # å†å²è®°å½•ç¿»è¯‘
â”‚   â”‚   â”‚   â”œâ”€â”€ routes.json   # è·¯çº¿ç®¡ç†ç¿»è¯‘
â”‚   â”‚   â”‚   â””â”€â”€ cache.json    # ç¼“å­˜ç®¡ç†ç¿»è¯‘
â”‚   â”‚   â”œâ”€â”€ en-US/            # è‹±æ–‡ç¿»è¯‘
â”‚   â”‚   â”‚   â”œâ”€â”€ common.json
â”‚   â”‚   â”‚   â”œâ”€â”€ home.json
â”‚   â”‚   â”‚   â”œâ”€â”€ history.json
â”‚   â”‚   â”‚   â”œâ”€â”€ routes.json
â”‚   â”‚   â”‚   â””â”€â”€ cache.json
â”‚   â”‚   â”œâ”€â”€ es-ES/            # è¥¿ç­ç‰™è¯­ç¿»è¯‘
â”‚   â”‚   â”‚   â”œâ”€â”€ common.json
â”‚   â”‚   â”‚   â”œâ”€â”€ home.json
â”‚   â”‚   â”‚   â”œâ”€â”€ history.json
â”‚   â”‚   â”‚   â”œâ”€â”€ routes.json
â”‚   â”‚   â”‚   â””â”€â”€ cache.json
â”‚   â”‚   â””â”€â”€ hi-IN/            # å°åœ°è¯­ç¿»è¯‘
â”‚   â”‚       â”œâ”€â”€ common.json
â”‚   â”‚       â”œâ”€â”€ home.json
â”‚   â”‚       â”œâ”€â”€ history.json
â”‚   â”‚       â”œâ”€â”€ routes.json
â”‚   â”‚       â””â”€â”€ cache.json
```

## å®ç°æ­¥éª¤

### æ­¥éª¤1ï¼šåˆ›å»ºi18né…ç½®æ–‡ä»¶

åˆ›å»º `src/i18n/index.ts`ï¼š

```typescript
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

// å¯¼å…¥ç¿»è¯‘æ–‡ä»¶
import zhCNCommon from './locales/zh-CN/common.json';
import zhCNHome from './locales/zh-CN/home.json';
import zhCNHistory from './locales/zh-CN/history.json';
import zhCNRoutes from './locales/zh-CN/routes.json';
import zhCNCache from './locales/zh-CN/cache.json';

import enUSCommon from './locales/en-US/common.json';
import enUSHome from './locales/en-US/home.json';
import enUSHistory from './locales/en-US/history.json';
import enUSRoutes from './locales/en-US/routes.json';
import enUSCache from './locales/en-US/cache.json';

import esESCommon from './locales/es-ES/common.json';
import esESHome from './locales/es-ES/home.json';
import esESHistory from './locales/es-ES/history.json';
import esESRoutes from './locales/es-ES/routes.json';
import esESCache from './locales/es-ES/cache.json';

import hiINCommon from './locales/hi-IN/common.json';
import hiINHome from './locales/hi-IN/home.json';
import hiINHistory from './locales/hi-IN/history.json';
import hiINRoutes from './locales/hi-IN/routes.json';
import hiINCache from './locales/hi-IN/cache.json';

const resources = {
  'zh-CN': {
    common: zhCNCommon,
    home: zhCNHome,
    history: zhCNHistory,
    routes: zhCNRoutes,
    cache: zhCNCache,
  },
  'en-US': {
    common: enUSCommon,
    home: enUSHome,
    history: enUSHistory,
    routes: enUSRoutes,
    cache: enUSCache,
  },
  'es-ES': {
    common: esESCommon,
    home: esESHome,
    history: esESHistory,
    routes: esESRoutes,
    cache: esESCache,
  },
  'hi-IN': {
    common: hiINCommon,
    home: hiINHome,
    history: hiINHistory,
    routes: hiINRoutes,
    cache: hiINCache,
  },
};

i18n
  .use(LanguageDetector) // è‡ªåŠ¨æ£€æµ‹æµè§ˆå™¨è¯­è¨€
  .use(initReactI18next) // åˆå§‹åŒ–react-i18next
  .init({
    resources,
    fallbackLng: 'zh-CN', // é»˜è®¤è¯­è¨€
    defaultNS: 'common', // é»˜è®¤å‘½åç©ºé—´
    ns: ['common', 'home', 'history', 'routes', 'cache'], // å‘½åç©ºé—´åˆ—è¡¨
    
    interpolation: {
      escapeValue: false, // Reactå·²ç»è½¬ä¹‰ï¼Œä¸éœ€è¦i18nextè½¬ä¹‰
    },
    
    detection: {
      // è¯­è¨€æ£€æµ‹é…ç½®
      order: ['localStorage', 'navigator', 'htmlTag'],
      caches: ['localStorage'],
      lookupLocalStorage: 'i18nextLng',
    },
  });

export default i18n;
```

### æ­¥éª¤2ï¼šåˆ›å»ºç¿»è¯‘æ–‡ä»¶

#### ä¸­æ–‡ç¿»è¯‘æ–‡ä»¶ç¤ºä¾‹

`src/i18n/locales/zh-CN/common.json`ï¼š

```json
{
  "appName": "TimeArea",
  "appDescription": "é•¿é€”å‡ºè¡Œå¤©æ°”æŸ¥è¯¢ç³»ç»Ÿ",
  "loading": "åŠ è½½ä¸­...",
  "error": "é”™è¯¯",
  "success": "æˆåŠŸ",
  "confirm": "ç¡®è®¤",
  "cancel": "å–æ¶ˆ",
  "delete": "åˆ é™¤",
  "edit": "ç¼–è¾‘",
  "save": "ä¿å­˜",
  "search": "æœç´¢",
  "back": "è¿”å›",
  "home": "é¦–é¡µ",
  "submit": "æäº¤",
  "reset": "é‡ç½®"
}
```

`src/i18n/locales/zh-CN/home.json`ï¼š

```json
{
  "title": "é•¿é€”å‡ºè¡Œå¤©æ°”æŸ¥è¯¢",
  "description": "è¾“å…¥ç»è¿‡åœ°ç‚¹å’Œåˆ°è¾¾æ—¶é—´ï¼ŒæŸ¥è¯¢æ²¿é€”å¤©æ°”ä¿¡æ¯",
  "location": "åœ°ç‚¹",
  "arrivalTime": "åˆ°è¾¾æ—¶é—´",
  "addWaypoint": "æ·»åŠ ç»è¿‡ç‚¹",
  "queryWeather": "æŸ¥è¯¢å¤©æ°”",
  "gpsLocation": "GPSå®šä½",
  "quickTime": "å¿«é€Ÿæ—¶é—´",
  "batchImport": "æ‰¹é‡å¯¼å…¥",
  "copyList": "å¤åˆ¶åˆ—è¡¨",
  "routeManagement": "è·¯çº¿ç®¡ç†",
  "history": "å†å²è®°å½•",
  "now": "ç°åœ¨",
  "hoursLater": "{{count}}å°æ—¶å",
  "hoursLater_plural": "{{count}}å°æ—¶å"
}
```

`src/i18n/locales/zh-CN/history.json`ï¼š

```json
{
  "title": "å†å²è®°å½•",
  "description": "æŸ¥çœ‹æŸ¥è¯¢å†å²ã€å¸¸ç”¨åœ°ç‚¹å’Œç»Ÿè®¡ä¿¡æ¯",
  "queryHistory": "æŸ¥è¯¢å†å²",
  "popularLocations": "å¸¸ç”¨åœ°ç‚¹",
  "statistics": "ç»Ÿè®¡ä¿¡æ¯",
  "totalQueries": "æ€»æŸ¥è¯¢æ¬¡æ•°",
  "successfulQueries": "æˆåŠŸæŸ¥è¯¢",
  "failedQueries": "å¤±è´¥æŸ¥è¯¢",
  "successRate": "æˆåŠŸç‡",
  "averageQueryDuration": "å¹³å‡æŸ¥è¯¢è€—æ—¶",
  "lastQueryTime": "æœ€åæŸ¥è¯¢æ—¶é—´",
  "firstQueryTime": "é¦–æ¬¡æŸ¥è¯¢æ—¶é—´",
  "replay": "é‡æ–°æŸ¥è¯¢",
  "clearAll": "æ¸…ç©ºå…¨éƒ¨",
  "refresh": "åˆ·æ–°"
}
```

#### è‹±æ–‡ç¿»è¯‘æ–‡ä»¶ç¤ºä¾‹

`src/i18n/locales/en-US/common.json`ï¼š

```json
{
  "appName": "TimeArea",
  "appDescription": "Long-distance Travel Weather Query System",
  "loading": "Loading...",
  "error": "Error",
  "success": "Success",
  "confirm": "Confirm",
  "cancel": "Cancel",
  "delete": "Delete",
  "edit": "Edit",
  "save": "Save",
  "search": "Search",
  "back": "Back",
  "home": "Home",
  "submit": "Submit",
  "reset": "Reset"
}
```

`src/i18n/locales/en-US/home.json`ï¼š

```json
{
  "title": "Long-distance Travel Weather Query",
  "description": "Enter locations and arrival times to query weather information along the route",
  "location": "Location",
  "arrivalTime": "Arrival Time",
  "addWaypoint": "Add Waypoint",
  "queryWeather": "Query Weather",
  "gpsLocation": "GPS Location",
  "quickTime": "Quick Time",
  "batchImport": "Batch Import",
  "copyList": "Copy List",
  "routeManagement": "Route Management",
  "history": "History",
  "now": "Now",
  "hoursLater": "{{count}} hours later",
  "hoursLater_plural": "{{count}} hours later"
}
```

#### è¥¿ç­ç‰™è¯­ç¿»è¯‘æ–‡ä»¶ç¤ºä¾‹

`src/i18n/locales/es-ES/common.json`ï¼š

```json
{
  "appName": "TimeArea",
  "appDescription": "Sistema de Consulta del Clima para Viajes de Larga Distancia",
  "loading": "Cargando...",
  "error": "Error",
  "success": "Ã‰xito",
  "confirm": "Confirmar",
  "cancel": "Cancelar",
  "delete": "Eliminar",
  "edit": "Editar",
  "save": "Guardar",
  "search": "Buscar",
  "back": "Volver",
  "home": "Inicio",
  "submit": "Enviar",
  "reset": "Restablecer",
  "refresh": "Actualizar",
  "clear": "Limpiar",
  "copy": "Copiar",
  "share": "Compartir",
  "favorite": "Favorito",
  "settings": "ConfiguraciÃ³n"
}
```

`src/i18n/locales/es-ES/home.json`ï¼š

```json
{
  "title": "Consulta del Clima para Viajes de Larga Distancia",
  "description": "Ingrese ubicaciones y horarios de llegada para consultar informaciÃ³n meteorolÃ³gica a lo largo de la ruta",
  "location": "UbicaciÃ³n",
  "arrivalTime": "Hora de Llegada",
  "addWaypoint": "Agregar Punto de Paso",
  "queryWeather": "Consultar Clima",
  "gpsLocation": "UbicaciÃ³n GPS",
  "quickTime": "Tiempo RÃ¡pido",
  "batchImport": "ImportaciÃ³n por Lotes",
  "copyList": "Copiar Lista",
  "routeManagement": "GestiÃ³n de Rutas",
  "history": "Historial",
  "now": "Ahora",
  "hoursLater": "{{count}} horas despuÃ©s",
  "hoursLater_plural": "{{count}} horas despuÃ©s"
}
```

#### å°åœ°è¯­ç¿»è¯‘æ–‡ä»¶ç¤ºä¾‹

`src/i18n/locales/hi-IN/common.json`ï¼š

```json
{
  "appName": "TimeArea",
  "appDescription": "à¤²à¤‚à¤¬à¥€ à¤¦à¥‚à¤°à¥€ à¤•à¥€ à¤¯à¤¾à¤¤à¥à¤°à¤¾ à¤®à¥Œà¤¸à¤® à¤•à¥à¤µà¥‡à¤°à¥€ à¤ªà¥à¤°à¤£à¤¾à¤²à¥€",
  "loading": "à¤²à¥‹à¤¡ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...",
  "error": "à¤¤à¥à¤°à¥à¤Ÿà¤¿",
  "success": "à¤¸à¤«à¤²",
  "confirm": "à¤ªà¥à¤·à¥à¤Ÿà¤¿ à¤•à¤°à¥‡à¤‚",
  "cancel": "à¤°à¤¦à¥à¤¦ à¤•à¤°à¥‡à¤‚",
  "delete": "à¤¹à¤Ÿà¤¾à¤à¤‚",
  "edit": "à¤¸à¤‚à¤ªà¤¾à¤¦à¤¿à¤¤ à¤•à¤°à¥‡à¤‚",
  "save": "à¤¸à¤¹à¥‡à¤œà¥‡à¤‚",
  "search": "à¤–à¥‹à¤œà¥‡à¤‚",
  "back": "à¤µà¤¾à¤ªà¤¸",
  "home": "à¤¹à¥‹à¤®",
  "submit": "à¤¸à¤¬à¤®à¤¿à¤Ÿ à¤•à¤°à¥‡à¤‚",
  "reset": "à¤°à¥€à¤¸à¥‡à¤Ÿ à¤•à¤°à¥‡à¤‚",
  "refresh": "à¤¤à¤¾à¤œà¤¼à¤¾ à¤•à¤°à¥‡à¤‚",
  "clear": "à¤¸à¤¾à¤« à¤•à¤°à¥‡à¤‚",
  "copy": "à¤•à¥‰à¤ªà¥€ à¤•à¤°à¥‡à¤‚",
  "share": "à¤¸à¤¾à¤à¤¾ à¤•à¤°à¥‡à¤‚",
  "favorite": "à¤ªà¤¸à¤‚à¤¦à¥€à¤¦à¤¾",
  "settings": "à¤¸à¥‡à¤Ÿà¤¿à¤‚à¤—à¥à¤¸"
}
```

`src/i18n/locales/hi-IN/home.json`ï¼š

```json
{
  "title": "à¤²à¤‚à¤¬à¥€ à¤¦à¥‚à¤°à¥€ à¤•à¥€ à¤¯à¤¾à¤¤à¥à¤°à¤¾ à¤®à¥Œà¤¸à¤® à¤•à¥à¤µà¥‡à¤°à¥€",
  "description": "à¤®à¤¾à¤°à¥à¤— à¤•à¥‡ à¤¸à¤¾à¤¥ à¤®à¥Œà¤¸à¤® à¤•à¥€ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€ à¤•à¥à¤µà¥‡à¤°à¥€ à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤¸à¥à¤¥à¤¾à¤¨ à¤”à¤° à¤†à¤—à¤®à¤¨ à¤¸à¤®à¤¯ à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚",
  "location": "à¤¸à¥à¤¥à¤¾à¤¨",
  "arrivalTime": "à¤†à¤—à¤®à¤¨ à¤¸à¤®à¤¯",
  "addWaypoint": "à¤µà¥‡à¤ªà¥‰à¤‡à¤‚à¤Ÿ à¤œà¥‹à¤¡à¤¼à¥‡à¤‚",
  "queryWeather": "à¤®à¥Œà¤¸à¤® à¤•à¥à¤µà¥‡à¤°à¥€ à¤•à¤°à¥‡à¤‚",
  "gpsLocation": "GPS à¤¸à¥à¤¥à¤¾à¤¨",
  "quickTime": "à¤¤à¥à¤µà¤°à¤¿à¤¤ à¤¸à¤®à¤¯",
  "batchImport": "à¤¬à¥ˆà¤š à¤†à¤¯à¤¾à¤¤",
  "copyList": "à¤¸à¥‚à¤šà¥€ à¤•à¥‰à¤ªà¥€ à¤•à¤°à¥‡à¤‚",
  "routeManagement": "à¤®à¤¾à¤°à¥à¤— à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¨",
  "history": "à¤‡à¤¤à¤¿à¤¹à¤¾à¤¸",
  "now": "à¤…à¤­à¥€",
  "hoursLater": "{{count}} à¤˜à¤‚à¤Ÿà¥‡ à¤¬à¤¾à¤¦",
  "hoursLater_plural": "{{count}} à¤˜à¤‚à¤Ÿà¥‡ à¤¬à¤¾à¤¦"
}
```

## æ”¯æŒçš„è¯­è¨€

TimeArea ç›®å‰æ”¯æŒä»¥ä¸‹å››ç§è¯­è¨€ï¼š

### 1. ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰- zh-CN
- **è¯­è¨€ä»£ç **: `zh-CN`
- **ä½¿ç”¨åœ°åŒº**: ä¸­å›½å¤§é™†
- **å­—ç¬¦é›†**: UTF-8
- **æ–‡å­—æ–¹å‘**: LTRï¼ˆä»å·¦åˆ°å³ï¼‰
- **å­—ä½“è¦æ±‚**: æ”¯æŒä¸­æ–‡å­—ç¬¦çš„æ ‡å‡†å­—ä½“

### 2. è‹±æ–‡ - en-US
- **è¯­è¨€ä»£ç **: `en-US`
- **ä½¿ç”¨åœ°åŒº**: ç¾å›½åŠè‹±è¯­å›½å®¶
- **å­—ç¬¦é›†**: UTF-8
- **æ–‡å­—æ–¹å‘**: LTRï¼ˆä»å·¦åˆ°å³ï¼‰
- **å­—ä½“è¦æ±‚**: æ ‡å‡†è‹±æ–‡å­—ä½“

### 3. è¥¿ç­ç‰™è¯­ - es-ES
- **è¯­è¨€ä»£ç **: `es-ES`
- **ä½¿ç”¨åœ°åŒº**: è¥¿ç­ç‰™åŠæ‹‰ä¸ç¾æ´²
- **å­—ç¬¦é›†**: UTF-8
- **æ–‡å­—æ–¹å‘**: LTRï¼ˆä»å·¦åˆ°å³ï¼‰
- **ç‰¹æ®Šå­—ç¬¦**: åŒ…å«é‡éŸ³ç¬¦å·ï¼ˆÃ¡, Ã©, Ã­, Ã³, Ãº, Ã±ç­‰ï¼‰
- **å­—ä½“è¦æ±‚**: æ”¯æŒæ‹‰ä¸å­—ç¬¦æ‰©å±•çš„æ ‡å‡†å­—ä½“

### 4. å°åœ°è¯­ - hi-IN
- **è¯­è¨€ä»£ç **: `hi-IN`
- **ä½¿ç”¨åœ°åŒº**: å°åº¦
- **å­—ç¬¦é›†**: UTF-8
- **æ–‡å­—æ–¹å‘**: LTRï¼ˆä»å·¦åˆ°å³ï¼‰
- **æ–‡å­—ç³»ç»Ÿ**: å¤©åŸæ–‡ï¼ˆDevanagariï¼‰
- **å­—ä½“è¦æ±‚**: éœ€è¦æ”¯æŒå¤©åŸæ–‡å­—ç¬¦çš„å­—ä½“ï¼ˆå¦‚ Noto Sans Devanagariï¼‰

### æ­¥éª¤3ï¼šåœ¨App.tsxä¸­åˆå§‹åŒ–i18n

```typescript
import { HelmetProvider } from 'react-helmet-async';
import './i18n'; // å¯¼å…¥i18né…ç½®

function App() {
  return (
    <HelmetProvider>
      {/* å…¶ä»–ä»£ç  */}
    </HelmetProvider>
  );
}
```

### æ­¥éª¤4ï¼šåœ¨ç»„ä»¶ä¸­ä½¿ç”¨ç¿»è¯‘

#### ä½¿ç”¨Hookæ–¹å¼

```typescript
import { useTranslation } from 'react-i18next';

export const Home: React.FC = () => {
  const { t } = useTranslation(['common', 'home']);
  
  return (
    <div>
      <h1>{t('home:title')}</h1>
      <p>{t('home:description')}</p>
      <Button>{t('home:queryWeather')}</Button>
    </div>
  );
};
```

#### ä½¿ç”¨HOCæ–¹å¼

```typescript
import { withTranslation } from 'react-i18next';

const Home: React.FC<{ t: (key: string) => string }> = ({ t }) => {
  return (
    <div>
      <h1>{t('home:title')}</h1>
    </div>
  );
};

export default withTranslation(['home'])(Home);
```

#### ä½¿ç”¨Transç»„ä»¶ï¼ˆæ”¯æŒæ’å€¼ï¼‰

```typescript
import { Trans } from 'react-i18next';

<Trans
  i18nKey="home:hoursLater"
  count={2}
  values={{ count: 2 }}
>
  {{count}}å°æ—¶å
</Trans>
```

### æ­¥éª¤5ï¼šåˆ›å»ºè¯­è¨€åˆ‡æ¢ç»„ä»¶

åˆ›å»º `src/components/common/LanguageSwitcher.tsx`ï¼š

```typescript
import React from 'react';
import { Select } from 'antd';
import { useTranslation } from 'react-i18next';
import { GlobalOutlined } from '@ant-design/icons';

const { Option } = Select;

const languages = [
  { code: 'zh-CN', name: 'ä¸­æ–‡', flag: 'ğŸ‡¨ğŸ‡³' },
  { code: 'en-US', name: 'English', flag: 'ğŸ‡ºğŸ‡¸' },
  { code: 'es-ES', name: 'EspaÃ±ol', flag: 'ğŸ‡ªğŸ‡¸' },
  { code: 'hi-IN', name: 'à¤¹à¤¿à¤¨à¥à¤¦à¥€', flag: 'ğŸ‡®ğŸ‡³' },
];

export const LanguageSwitcher: React.FC = () => {
  const { i18n } = useTranslation();

  const handleChange = (value: string) => {
    i18n.changeLanguage(value);
    // ä¿å­˜åˆ°localStorage
    localStorage.setItem('i18nextLng', value);
  };

  return (
    <Select
      value={i18n.language}
      onChange={handleChange}
      style={{ width: 120 }}
      suffixIcon={<GlobalOutlined />}
    >
      {languages.map((lang) => (
        <Option key={lang.code} value={lang.code}>
          {lang.flag} {lang.name}
        </Option>
      ))}
    </Select>
  );
};
```

### æ­¥éª¤6ï¼šåœ¨é¡µé¢ä¸­æ·»åŠ è¯­è¨€åˆ‡æ¢å™¨

åœ¨ `Home.tsx` ä¸­æ·»åŠ ï¼š

```typescript
import { LanguageSwitcher } from '../components/common/LanguageSwitcher';

export const Home: React.FC = () => {
  return (
    <Layout>
      <Content>
        <div style={{ textAlign: 'right', marginBottom: 16 }}>
          <LanguageSwitcher />
        </div>
        {/* å…¶ä»–å†…å®¹ */}
      </Content>
    </Layout>
  );
};
```

## é«˜çº§åŠŸèƒ½

### 1. å‘½åç©ºé—´ï¼ˆNamespaceï¼‰

ä½¿ç”¨å‘½åç©ºé—´å¯ä»¥æ›´å¥½åœ°ç»„ç»‡ç¿»è¯‘æ–‡ä»¶ï¼š

```typescript
const { t } = useTranslation(['common', 'home']);

// ä½¿ç”¨å‘½åç©ºé—´
t('home:title');        // ä»homeå‘½åç©ºé—´è·å–
t('common:loading');    // ä»commonå‘½åç©ºé—´è·å–
```

### 2. å¤æ•°å½¢å¼

æ”¯æŒå•å¤æ•°å½¢å¼ï¼š

```json
{
  "item": "{{count}} é¡¹",
  "item_plural": "{{count}} é¡¹",
  "item_0": "æ²¡æœ‰é¡¹"
}
```

ä½¿ç”¨ï¼š

```typescript
t('item', { count: 0 });  // "æ²¡æœ‰é¡¹"
t('item', { count: 1 });  // "1 é¡¹"
t('item', { count: 5 });  // "5 é¡¹"
```

### 3. æ’å€¼ï¼ˆInterpolationï¼‰

åœ¨ç¿»è¯‘ä¸­ä½¿ç”¨å˜é‡ï¼š

```json
{
  "welcome": "æ¬¢è¿ï¼Œ{{name}}ï¼",
  "queryCount": "å·²æŸ¥è¯¢ {{count}} æ¬¡"
}
```

ä½¿ç”¨ï¼š

```typescript
t('welcome', { name: 'å¼ ä¸‰' });
t('queryCount', { count: 10 });
```

### 4. ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰

æ ¹æ®ä¸Šä¸‹æ–‡ä½¿ç”¨ä¸åŒçš„ç¿»è¯‘ï¼š

```json
{
  "status": "çŠ¶æ€",
  "status_active": "æ¿€æ´»",
  "status_inactive": "æœªæ¿€æ´»"
}
```

ä½¿ç”¨ï¼š

```typescript
t('status', { context: 'active' });    // "æ¿€æ´»"
t('status', { context: 'inactive' });  // "æœªæ¿€æ´»"
```

### 5. æ—¥æœŸå’Œæ•°å­—æ ¼å¼åŒ–

ä½¿ç”¨ `i18next` çš„æ ¼å¼åŒ–åŠŸèƒ½ï¼š

```typescript
import { useTranslation } from 'react-i18next';

const { t, i18n } = useTranslation();

// æ—¥æœŸæ ¼å¼åŒ–
const date = new Date();
const formattedDate = new Intl.DateTimeFormat(i18n.language).format(date);

// æ•°å­—æ ¼å¼åŒ–
const number = 1234.56;
const formattedNumber = new Intl.NumberFormat(i18n.language).format(number);
```

## æœ€ä½³å®è·µ

### 1. ç¿»è¯‘é”®å‘½åè§„èŒƒ

ä½¿ç”¨æ¸…æ™°çš„å‘½åç©ºé—´å’Œé”®åï¼š

```
âœ… å¥½çš„å‘½åï¼š
home:title
common:button.save
history:queryHistory.title

âŒ ä¸å¥½çš„å‘½åï¼š
title
btn1
text
```

### 2. é¿å…ç¡¬ç¼–ç æ–‡æœ¬

å°†æ‰€æœ‰ç”¨æˆ·å¯è§çš„æ–‡æœ¬æå–åˆ°ç¿»è¯‘æ–‡ä»¶ä¸­ï¼š

```typescript
// âŒ ä¸å¥½
<Button>æŸ¥è¯¢å¤©æ°”</Button>

// âœ… å¥½
<Button>{t('home:queryWeather')}</Button>
```

### 3. ä½¿ç”¨TypeScriptç±»å‹

åˆ›å»ºç±»å‹å®šä¹‰æ–‡ä»¶ `src/i18n/types.ts`ï¼š

```typescript
import 'react-i18next';
import common from './locales/zh-CN/common.json';
import home from './locales/zh-CN/home.json';
import history from './locales/zh-CN/history.json';
import routes from './locales/zh-CN/routes.json';
import cache from './locales/zh-CN/cache.json';

declare module 'react-i18next' {
  interface CustomTypeOptions {
    defaultNS: 'common';
    resources: {
      common: typeof common;
      home: typeof home;
      history: typeof history;
      routes: typeof routes;
      cache: typeof cache;
    };
  }
}
```

### 4. æ‡’åŠ è½½ç¿»è¯‘æ–‡ä»¶

å¯¹äºå¤§å‹åº”ç”¨ï¼Œå¯ä»¥æ‡’åŠ è½½ç¿»è¯‘æ–‡ä»¶ï¼š

```typescript
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';
import Backend from 'i18next-http-backend'; // éœ€è¦å®‰è£…

i18n
  .use(Backend) // æ‡’åŠ è½½ç¿»è¯‘æ–‡ä»¶
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    fallbackLng: 'zh-CN',
    backend: {
      loadPath: '/locales/{{lng}}/{{ns}}.json',
    },
  });
```

### 5. SEOå¤šè¯­è¨€æ”¯æŒ

åœ¨SEOç»„ä»¶ä¸­æ ¹æ®è¯­è¨€è®¾ç½®ä¸åŒçš„metaæ ‡ç­¾ï¼š

```typescript
import { useTranslation } from 'react-i18next';
import { SEO } from '../components/seo/SEO';

export const Home: React.FC = () => {
  const { t, i18n } = useTranslation(['home', 'common']);
  
  return (
    <>
      <SEO
        title={t('home:title')}
        description={t('home:description')}
      />
      {/* é¡µé¢å†…å®¹ */}
    </>
  );
};
```

## æ·»åŠ æ–°è¯­è¨€

### æ­¥éª¤1ï¼šåˆ›å»ºç¿»è¯‘æ–‡ä»¶

åœ¨ `src/i18n/locales/` ä¸‹åˆ›å»ºæ–°è¯­è¨€ç›®å½•ï¼Œä¾‹å¦‚ `ja-JP/`ï¼Œå¹¶å¤åˆ¶æ‰€æœ‰JSONæ–‡ä»¶ã€‚

### æ­¥éª¤2ï¼šæ›´æ–°i18né…ç½®

åœ¨ `src/i18n/index.ts` ä¸­å¯¼å…¥æ–°è¯­è¨€çš„ç¿»è¯‘æ–‡ä»¶å¹¶æ·»åŠ åˆ°resourcesä¸­ã€‚

### æ­¥éª¤3ï¼šæ›´æ–°è¯­è¨€åˆ—è¡¨

åœ¨ `LanguageSwitcher` ç»„ä»¶ä¸­æ·»åŠ æ–°è¯­è¨€é€‰é¡¹ã€‚

### æ­¥éª¤4ï¼šæµ‹è¯•

åˆ‡æ¢è¯­è¨€å¹¶æµ‹è¯•æ‰€æœ‰é¡µé¢çš„ç¿»è¯‘æ˜¯å¦æ­£ç¡®ã€‚

## å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•è·å–å½“å‰è¯­è¨€ï¼Ÿ

```typescript
const { i18n } = useTranslation();
const currentLanguage = i18n.language; // 'zh-CN' æˆ– 'en-US'
```

### Q2: å¦‚ä½•æ‰‹åŠ¨åˆ‡æ¢è¯­è¨€ï¼Ÿ

```typescript
const { i18n } = useTranslation();
i18n.changeLanguage('en-US');
```

### Q3: å¦‚ä½•å¤„ç†RTLï¼ˆä»å³åˆ°å·¦ï¼‰è¯­è¨€ï¼Ÿ

```typescript
// åœ¨i18né…ç½®ä¸­æ·»åŠ 
i18n.on('languageChanged', (lng) => {
  if (lng === 'ar') {
    document.documentElement.dir = 'rtl';
  } else {
    document.documentElement.dir = 'ltr';
  }
});
```

### Q4: ç¿»è¯‘æ–‡ä»¶å¤ªå¤§æ€ä¹ˆåŠï¼Ÿ

ä½¿ç”¨å‘½åç©ºé—´æ‹†åˆ†ï¼Œæˆ–è€…ä½¿ç”¨æ‡’åŠ è½½åŠŸèƒ½ã€‚

## å‚è€ƒèµ„æº

- [react-i18next å®˜æ–¹æ–‡æ¡£](https://react.i18next.com/)
- [i18next å®˜æ–¹æ–‡æ¡£](https://www.i18next.com/)
- [i18next æœ€ä½³å®è·µ](https://www.i18next.com/principles/best-practices)

## è¯­è¨€ä¼˜å…ˆçº§å’Œå›é€€ç­–ç•¥

### è¯­è¨€æ£€æµ‹é¡ºåº

i18next ä¼šæŒ‰ä»¥ä¸‹é¡ºåºæ£€æµ‹ç”¨æˆ·è¯­è¨€ï¼š

1. **localStorage** - ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©ä¿å­˜çš„è¯­è¨€
2. **æµè§ˆå™¨è¯­è¨€** - ä» `navigator.language` è·å–
3. **HTMLæ ‡ç­¾** - ä» `<html lang>` å±æ€§è·å–

### å›é€€è¯­è¨€é“¾

å¦‚æœæŸä¸ªç¿»è¯‘ç¼ºå¤±ï¼Œi18next ä¼šæŒ‰ä»¥ä¸‹é¡ºåºå›é€€ï¼š

```
ç”¨æˆ·è¯­è¨€ â†’ é»˜è®¤è¯­è¨€ (zh-CN) â†’ é”®åæœ¬èº«
```

ä¾‹å¦‚ï¼šå¦‚æœç”¨æˆ·é€‰æ‹© `es-ES`ï¼Œä½†æŸä¸ªé”®åœ¨ `es-ES` ä¸­ä¸å­˜åœ¨ï¼Œä¼šå›é€€åˆ° `zh-CN`ï¼Œå¦‚æœè¿˜ä¸å­˜åœ¨ï¼Œåˆ™æ˜¾ç¤ºé”®åã€‚

### é…ç½®å›é€€è¯­è¨€

```typescript
i18n.init({
  fallbackLng: {
    'es-ES': ['es-ES', 'en-US', 'zh-CN'],  // è¥¿ç­ç‰™è¯­å›é€€åˆ°è‹±æ–‡ï¼Œå†å›é€€åˆ°ä¸­æ–‡
    'hi-IN': ['hi-IN', 'en-US', 'zh-CN'],  // å°åœ°è¯­å›é€€åˆ°è‹±æ–‡ï¼Œå†å›é€€åˆ°ä¸­æ–‡
    default: ['zh-CN', 'en-US'],            // å…¶ä»–è¯­è¨€é»˜è®¤å›é€€åˆ°ä¸­æ–‡ï¼Œå†å›é€€åˆ°è‹±æ–‡
  },
});
```

## æµ‹è¯•å¤šè¯­è¨€åŠŸèƒ½

### 1. æ‰‹åŠ¨æµ‹è¯•

åˆ‡æ¢ä¸åŒè¯­è¨€ï¼Œæ£€æŸ¥ï¼š
- æ‰€æœ‰æ–‡æœ¬æ˜¯å¦æ­£ç¡®ç¿»è¯‘
- å¸ƒå±€æ˜¯å¦æ­£å¸¸ï¼ˆç‰¹åˆ«æ˜¯å°åœ°è¯­ï¼‰
- æ—¥æœŸæ—¶é—´æ ¼å¼æ˜¯å¦æ­£ç¡®
- æ•°å­—æ ¼å¼æ˜¯å¦æ­£ç¡®

### 2. è‡ªåŠ¨åŒ–æµ‹è¯•

```typescript
import { render, screen } from '@testing-library/react';
import { I18nextProvider } from 'react-i18next';
import i18n from './i18n';

test('displays text in Spanish', async () => {
  await i18n.changeLanguage('es-ES');
  render(
    <I18nextProvider i18n={i18n}>
      <Home />
    </I18nextProvider>
  );
  expect(screen.getByText('Consulta del Clima')).toBeInTheDocument();
});
```

## æ€§èƒ½ä¼˜åŒ–

### 1. æ‡’åŠ è½½ç¿»è¯‘æ–‡ä»¶

å¯¹äºå¤§å‹åº”ç”¨ï¼Œå¯ä»¥æŒ‰éœ€åŠ è½½ç¿»è¯‘æ–‡ä»¶ï¼š

```typescript
import Backend from 'i18next-http-backend';

i18n
  .use(Backend)
  .init({
    backend: {
      loadPath: '/locales/{{lng}}/{{ns}}.json',
    },
  });
```

### 2. ä»£ç åˆ†å‰²

ä½¿ç”¨åŠ¨æ€å¯¼å…¥å‡å°‘åˆå§‹åŒ…å¤§å°ï¼š

```typescript
const resources = {
  'zh-CN': {
    common: () => import('./locales/zh-CN/common.json'),
    home: () => import('./locales/zh-CN/home.json'),
  },
};
```

## å­—ä½“æ”¯æŒé…ç½®

### å°åœ°è¯­å­—ä½“æ”¯æŒ

ç”±äºå°åœ°è¯­ä½¿ç”¨å¤©åŸæ–‡ï¼ˆDevanagariï¼‰æ–‡å­—ç³»ç»Ÿï¼Œéœ€è¦åœ¨é¡¹ç›®ä¸­æ·»åŠ å­—ä½“æ”¯æŒã€‚

#### æ–¹æ³•1ï¼šä½¿ç”¨Google Fonts

åœ¨ `index.html` ä¸­æ·»åŠ ï¼š

```html
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;500;700&display=swap" rel="stylesheet">
```

åœ¨CSSä¸­é…ç½®ï¼š

```css
body {
  font-family: 'Noto Sans Devanagari', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}
```

#### æ–¹æ³•2ï¼šä½¿ç”¨CSS @import

åœ¨ `src/index.css` æˆ–å…¨å±€æ ·å¼æ–‡ä»¶ä¸­ï¼š

```css
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;500;700&display=swap');
```

## è¯­è¨€æ£€æµ‹å’Œå›é€€ç­–ç•¥

### è‡ªåŠ¨è¯­è¨€æ£€æµ‹

i18next ä¼šè‡ªåŠ¨æ£€æµ‹ç”¨æˆ·è¯­è¨€ï¼Œæ£€æµ‹é¡ºåºï¼š

1. **localStorage** - ç”¨æˆ·ä¹‹å‰é€‰æ‹©ä¿å­˜çš„è¯­è¨€
2. **æµè§ˆå™¨è¯­è¨€** - ä» `navigator.language` è·å–
3. **HTMLæ ‡ç­¾** - ä» `<html lang>` å±æ€§è·å–

### å›é€€è¯­è¨€é…ç½®

```typescript
i18n.init({
  fallbackLng: {
    'es-ES': ['es-ES', 'en-US', 'zh-CN'],  // è¥¿ç­ç‰™è¯­å›é€€åˆ°è‹±æ–‡ï¼Œå†å›é€€åˆ°ä¸­æ–‡
    'hi-IN': ['hi-IN', 'en-US', 'zh-CN'],  // å°åœ°è¯­å›é€€åˆ°è‹±æ–‡ï¼Œå†å›é€€åˆ°ä¸­æ–‡
    default: ['zh-CN', 'en-US'],            // å…¶ä»–è¯­è¨€é»˜è®¤å›é€€åˆ°ä¸­æ–‡ï¼Œå†å›é€€åˆ°è‹±æ–‡
  },
});
```

## æ€»ç»“

é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼ŒTimeArea é¡¹ç›®å·²ç»æ”¯æŒå››ç§è¯­è¨€ï¼š

- âœ… **ä¸­æ–‡ï¼ˆç®€ä½“ï¼‰** - zh-CN - ä¸»è¦è¯­è¨€ï¼Œè¦†ç›–ä¸­å›½å¤§é™†ç”¨æˆ·
- âœ… **è‹±æ–‡** - en-US - å›½é™…é€šç”¨è¯­è¨€ï¼Œè¦†ç›–å…¨çƒè‹±è¯­ç”¨æˆ·
- âœ… **è¥¿ç­ç‰™è¯­** - es-ES - è¦†ç›–è¥¿ç­ç‰™åŠæ‹‰ä¸ç¾æ´²åœ°åŒº
- âœ… **å°åœ°è¯­** - hi-IN - è¦†ç›–å°åº¦åŠå—äºšåœ°åŒº

### è¯­è¨€è¦†ç›–èŒƒå›´

- **ä¸­æ–‡ï¼ˆzh-CNï¼‰**: çº¦14äº¿æ½œåœ¨ç”¨æˆ·ï¼ˆä¸­å›½å¤§é™†ï¼‰
- **è‹±æ–‡ï¼ˆen-USï¼‰**: çº¦15äº¿æ½œåœ¨ç”¨æˆ·ï¼ˆå…¨çƒè‹±è¯­ç”¨æˆ·ï¼‰
- **è¥¿ç­ç‰™è¯­ï¼ˆes-ESï¼‰**: çº¦5äº¿æ½œåœ¨ç”¨æˆ·ï¼ˆè¥¿ç­ç‰™åŠæ‹‰ä¸ç¾æ´²ï¼‰
- **å°åœ°è¯­ï¼ˆhi-INï¼‰**: çº¦6äº¿æ½œåœ¨ç”¨æˆ·ï¼ˆå°åº¦åŠå—äºšï¼‰

**æ€»è®¡è¦†ç›–çº¦40äº¿æ½œåœ¨ç”¨æˆ·**

### å®æ–½å»ºè®®

1. **ä¼˜å…ˆçº§**: å»ºè®®ä¼˜å…ˆå®ç°ä¸­æ–‡å’Œè‹±æ–‡ï¼Œè¿™ä¸¤ä¸ªè¯­è¨€è¦†ç›–æœ€å¹¿
2. **å­—ä½“æ”¯æŒ**: ç‰¹åˆ«æ³¨æ„å°åœ°è¯­çš„å¤©åŸæ–‡å­—ç¬¦æ”¯æŒ
3. **æµ‹è¯•**: æ¯ç§è¯­è¨€éƒ½éœ€è¦å®Œæ•´æµ‹è¯•ï¼Œç¡®ä¿å¸ƒå±€å’Œæ˜¾ç¤ºæ­£å¸¸
4. **ç¿»è¯‘è´¨é‡**: å»ºè®®ç”±æ¯è¯­ä½¿ç”¨è€…å®¡æ ¸ç¿»è¯‘å†…å®¹

å¤šè¯­è¨€åŠŸèƒ½å¯ä»¥æ˜¾è‘—æå‡åº”ç”¨çš„å›½é™…åŒ–ç¨‹åº¦å’Œç”¨æˆ·ä½“éªŒã€‚æ‰€æœ‰ç¿»è¯‘æ–‡ä»¶éƒ½ä½¿ç”¨UTF-8ç¼–ç ï¼Œç¡®ä¿ç‰¹æ®Šå­—ç¬¦å’Œå¤©åŸæ–‡å­—ç¬¦æ­£ç¡®æ˜¾ç¤ºã€‚

## æ·»åŠ æ–°è¯­è¨€æ”¯æŒ

### æ·»åŠ é˜¿æ‹‰ä¼¯è¯­æ”¯æŒ

å¦‚æœéœ€è¦æ·»åŠ é˜¿æ‹‰ä¼¯è¯­ï¼ˆArabicï¼‰æ”¯æŒï¼Œè¯·å‚è€ƒè¯¦ç»†æŒ‡å—ï¼š

ğŸ“– **[æ·»åŠ é˜¿æ‹‰ä¼¯è¯­æ”¯æŒæŒ‡å—](./æ·»åŠ é˜¿æ‹‰ä¼¯è¯­æ”¯æŒæŒ‡å—.md)**

è¯¥æŒ‡å—åŒ…å«ï¼š
- å®Œæ•´çš„ç¿»è¯‘æ–‡ä»¶ç¤ºä¾‹
- RTLï¼ˆä»å³åˆ°å·¦ï¼‰å¸ƒå±€é…ç½®
- Ant Design RTL æ”¯æŒ
- é˜¿æ‹‰ä¼¯è¯­å­—ä½“é…ç½®
- å¸¸è§é—®é¢˜æ’æŸ¥

### æ·»åŠ å…¶ä»–è¯­è¨€

æ·»åŠ å…¶ä»–è¯­è¨€çš„é€šç”¨æ­¥éª¤ï¼š

1. **åˆ›å»ºç¿»è¯‘æ–‡ä»¶**: åœ¨ `src/i18n/locales/` ä¸‹åˆ›å»ºæ–°è¯­è¨€æ–‡ä»¶å¤¹å’Œç¿»è¯‘æ–‡ä»¶
2. **æ›´æ–° i18n é…ç½®**: åœ¨ `src/i18n/index.ts` ä¸­å¯¼å…¥å¹¶æ³¨å†Œæ–°è¯­è¨€
3. **æ›´æ–°è¯­è¨€åˆ‡æ¢å™¨**: åœ¨ `LanguageSwitcher` ç»„ä»¶ä¸­æ·»åŠ æ–°è¯­è¨€é€‰é¡¹
4. **é…ç½® Ant Design**: å¦‚æœ Ant Design æ”¯æŒè¯¥è¯­è¨€çš„ localeï¼Œåœ¨ `App.tsx` ä¸­é…ç½®
5. **å­—ä½“æ”¯æŒ**: å¦‚æœè¯­è¨€éœ€è¦ç‰¹æ®Šå­—ä½“ï¼Œæ·»åŠ å­—ä½“æ”¯æŒ
6. **æµ‹è¯•**: å…¨é¢æµ‹è¯•æ–°è¯­è¨€çš„æ˜¾ç¤ºå’Œå¸ƒå±€

**æ³¨æ„**: å¯¹äº RTL è¯­è¨€ï¼ˆå¦‚é˜¿æ‹‰ä¼¯è¯­ã€å¸Œä¼¯æ¥è¯­ï¼‰ï¼Œéœ€è¦é¢å¤–çš„ RTL å¸ƒå±€é…ç½®ï¼Œè¯·å‚è€ƒé˜¿æ‹‰ä¼¯è¯­æ”¯æŒæŒ‡å—ã€‚
